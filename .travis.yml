language: python

matrix:
  include:
    - dist: xenial
      os: linux
      language: python
      python: "3.6"
    - dist: xenial
      os: linux
      language: python
      python: "3.7"
    - dist: xenial
      os: linux
      language: python
      python: "3.8"
    - dist: xenial
      os: linux
      language: python
      python: "3.9"

    - dist: bionic
      os: linux
      language: python
      python: "3.7"
    - dist: bionic
      os: linux
      language: python
      python: "3.8"
    - dist: bionic
      os: linux
      language: python
      python: "3.9"

    - dist: focal
      os: linux
      language: python
      python: "3.7"
    - dist: focal
      os: linux
      language: python
      python: "3.8"
    - dist: focal
      os: linux
      language: python
      python: "3.9"

install:
  - "python -m pip install --upgrade pip"
  - "python -m pip install -r requirements.txt"
  - "git fetch --depth=1 https://github.com/Breakthrough/PySceneDetect.git refs/heads/resources:refs/remotes/origin/resources"
  - "git checkout refs/remotes/origin/resources -- tests/resources/"

script:
  - python -m pytest tests/
